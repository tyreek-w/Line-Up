{"version":3,"sources":["../../profiles/userActionController.js"],"names":["models","require","createProfile","Object","response","err","type","UserModel","User","findOrCreate","where","id","firstName","lastName","status","email","phoneNumber","gender","paymentInfo","passwordHash","password","spread","user","created","console","log","userId","BarberModel","Barber","username","profileObj","premium","module","exports"],"mappings":"AAAA;;AACA,IAAIA,SAASC,QAAQ,mBAAR,CAAb;;AAGA,SAASC,aAAT,CAAuBC,MAAvB,EAA+BC,QAA/B,EAAyC;AACrC,QAAIC,MAAM,EAAV;AACA,QAAGF,OAAOG,IAAP,KAAgB,QAAnB,EAA6B;AACzB,YAAIC,YAAYP,OAAOQ,IAAvB;AACID,kBACKE,YADL,CACkB,EAAE;AACZC,mBACI;AACIC,oBAAIR,OAAOQ,EADf;AAEIC,2BAAWT,OAAOS,SAFtB;AAGIC,0BAAUV,OAAOU,QAHrB;AAIIC,wBAAQX,OAAOW,MAJnB;AAKIC,uBAAOZ,OAAOY,KALlB;AAMIC,6BAAab,OAAOa,WANxB;AAOIC,wBAAQd,OAAOc,MAPnB;AAQIC,6BAAaf,OAAOe,WARxB;AASIC,8BAAchB,OAAOiB;AATzB;AAFM,SADlB,EAeKC,MAfL,CAeY,UAACC,IAAD,EAAOC,OAAP,EAAmB;AACvB,gBAAGA,OAAH,EAAW;AAAK;AACZC,wBAAQC,GAAR,CAAY,cAAZ;AACArB,yBAASkB,IAAT;AACH,aAHD,MAII;AAAI;AACJE,wBAAQC,GAAR,CAAYF,OAAZ;AACAnB,yBAASC,GAAT;AACH;AAEJ,SAzBL;AA0BH,KA5BL,MA6BS,IAAGF,OAAOG,IAAP,KAAgB,QAAhB,IAA6BH,OAAOuB,MAAvC,EAA+C;AAChD,YAAIC,cAAc3B,OAAO4B,MAAzB;AACAD,oBACKlB,YADL,CACkB;AACVC,mBACI;AACIgB,wBAAQvB,OAAOuB,MADnB;AAEIG,0BAAUC,WAAWD,QAFzB;AAGIE,yBAAS5B,OAAO4B;;AAHpB;AAFM,SADlB,EAUKV,MAVL,CAUY,UAACC,IAAD,EAAOC,OAAP,EAAmB;AACvB,gBAAGA,OAAH,EAAW;AACPC,wBAAQC,GAAR,CAAY,gBAAZ;AACArB,yBAASkB,IAAT;AACH,aAHD,MAII;AACAE,wBAAQC,GAAR,CAAY,gDAAZ;AACArB,yBAASC,IAAI,uBAAJ,CAAT;AACH;AACJ,SAnBL;AAoBP;AACJ;;AAED2B,OAAOC,OAAP,GAAiB,EAAC/B,4BAAD,EAAjB","file":"userActionController.js","sourcesContent":["\"use strict\";\nlet models = require('../DBModels/index');\n\n\nfunction createProfile(Object, response) {\n    let err = \"\";\n    if(Object.type === 'client') {\n        let UserModel = models.User;\n            UserModel\n                .findOrCreate({ //look for existing user or create new\n                    where:\n                        {\n                            id: Object.id,\n                            firstName: Object.firstName,\n                            lastName: Object.lastName,\n                            status: Object.status,\n                            email: Object.email,\n                            phoneNumber: Object.phoneNumber,\n                            gender: Object.gender,\n                            paymentInfo: Object.paymentInfo,\n                            passwordHash: Object.password\n                        },\n                })\n                .spread((user, created) => {\n                    if(created){    //if user is created return user in callback\n                        console.log('user created');\n                        response(user);\n                    }\n                    else{   //if user is not created respond with error message\n                        console.log(created);\n                        response(err)\n                    }\n\n                })\n        }\n        else if(Object.type === 'barber' &&  Object.userId) {\n            let BarberModel = models.Barber;\n            BarberModel\n                .findOrCreate({\n                    where:\n                        {\n                            userId: Object.userId,\n                            username: profileObj.username,\n                            premium: Object.premium\n\n                        }\n                })\n                .spread((user, created) => {\n                    if(created){\n                        console.log('barber Created');\n                        response(user);\n                    }\n                    else{\n                        console.log(\"Barber already exists and could not be created\");\n                        response(err('Barber already exists'));\n                    }\n                })\n    }\n}\n\nmodule.exports = {createProfile};"]}