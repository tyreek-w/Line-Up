{"version":3,"sources":["../../../photos/Controllers/PhotoController.js"],"names":["dbmain","require","module","exports","index","req","res","query","params","barberId","undefined","BarberId","userId","UserId","haircutId","HaircutId","Photo","model","findAll","where","limit","then","send","photos","err","status","error","post","Haircut","User","Barber","belongsTo","create","id","body","imgUrl","parseInt","haircut"],"mappings":"AAAA;;;;AACA,IAAMA,SAASC,QAAQ,wBAAR,CAAf;;AAEAC,OAAOC,OAAP,GAAiB;AACPC,SADO;AAAA,4FACAC,GADA,EACKC,GADL;AAAA;AAAA;AAAA;AAAA;AAAA;AAELC,iCAFK,GAEG,EAFH;;AAGT,gCAAG,EAAEF,IAAIG,MAAJ,CAAWC,QAAX,KAAwBC,SAA1B,CAAH,EAAwC;AACpCH,sCAAMI,QAAN,GAAiBN,IAAIG,MAAJ,CAAWC,QAA5B;AACH;AACD,gCAAG,EAAEJ,IAAIG,MAAJ,CAAWI,MAAX,KAAsBF,SAAxB,CAAH,EAAsC;AAClCH,sCAAMM,MAAN,GAAeR,IAAIG,MAAJ,CAAWI,MAA1B;AACH;AACD,gCAAG,EAAEP,IAAIG,MAAJ,CAAWM,SAAX,KAAyBJ,SAA3B,CAAH,EAAyC;AACrCH,sCAAMQ,SAAN,GAAkBV,IAAIG,MAAJ,CAAWM,SAA7B;AACH;AACGE,iCAZK,GAYGhB,OAAOiB,KAAP,CAAa,OAAb,CAZH;;AAaT,gCAAI;AACAD,sCAAME,OAAN,CAAc;AACVC,2CAAOZ,KADG;AAEVa,2CAAO;AAFG,iCAAd,EAGGC,IAHH,CAGQ,kBAAU;AACdf,wCAAIgB,IAAJ,CAASC,MAAT;AACH,iCALD;AAMH,6BAPD,CAOE,OAAMC,GAAN,EAAW;AACTlB,oCAAImB,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB;AACjBI,2CAAO,gDAAgDF;AADtC,iCAArB;AAGH;;AAxBQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA0BPG,QA1BO;AAAA,8FA0BDtB,GA1BC,EA0BIC,GA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BLsB,mCA3BK,GA2BK5B,OAAOiB,KAAP,CAAa,SAAb,CA3BL;AA4BLY,gCA5BK,GA4BE7B,OAAOiB,KAAP,CAAa,MAAb,CA5BF;AA6BLa,kCA7BK,GA6BI9B,OAAOiB,KAAP,CAAa,QAAb,CA7BJ;AA8BLD,iCA9BK,GA8BGhB,OAAOiB,KAAP,CAAa,OAAb,CA9BH;;AA+BTD,kCAAMe,SAAN,CAAgBH,OAAhB;AACAZ,kCAAMe,SAAN,CAAgBF,IAAhB;AACAb,kCAAMe,SAAN,CAAgBD,MAAhB;AACA,gCAAI;AACAd,sCAAMgB,MAAN,CAAa;AACTC,wCAAI5B,IAAI6B,IAAJ,CAASD,EADJ;AAETE,4CAAQ9B,IAAI6B,IAAJ,CAASC,MAFR;AAGTtB,4CAAQuB,SAAS/B,IAAIG,MAAJ,CAAWI,MAApB,KAA+B,IAH9B;AAITD,8CAAUyB,SAAS/B,IAAIG,MAAJ,CAAWC,QAApB,KAAiC,IAJlC;AAKTM,+CAAWqB,SAAS/B,IAAIG,MAAJ,CAAWM,SAApB,KAAkC;AALpC,iCAAb,EAOKO,IAPL,CAOU,mBAAW;AACbf,wCAAIgB,IAAJ,CAASe,OAAT;AACH,iCATL;AAUH,6BAXD,CAWE,OAAMb,GAAN,EAAW;AACTlB,oCAAImB,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB;AACjBI,2CAAO,mDAAmDF;AADzC,iCAArB;AAGH;;AAjDQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAjB","file":"PhotoController.js","sourcesContent":["'use strict';\nconst dbmain = require('../../config/DB/DBmain');\n\nmodule.exports = {\n    async index (req, res) {\n        let query = {};\n        if(!(req.params.barberId === undefined)){\n            query.BarberId = req.params.barberId;\n        }\n        if(!(req.params.userId === undefined)){\n            query.UserId = req.params.userId;\n        }\n        if(!(req.params.haircutId === undefined)){\n            query.HaircutId = req.params.haircutId;\n        }\n        let Photo = dbmain.model(\"Photo\");\n        try {\n            Photo.findAll({\n                where: query,\n                limit: 20\n            }).then(photos => {\n                res.send(photos)\n            });\n        } catch(err) {\n            res.status(500).send({\n                error: 'An error has occurred trying to fetch songs' + err\n            })\n        }\n    },\n    async post (req, res) {\n        let Haircut = dbmain.model(\"Haircut\");\n        let User = dbmain.model(\"User\");\n        let Barber = dbmain.model('Barber');\n        let Photo = dbmain.model('Photo');\n        Photo.belongsTo(Haircut);\n        Photo.belongsTo(User);\n        Photo.belongsTo(Barber);\n        try {\n            Photo.create({\n                id: req.body.id,\n                imgUrl: req.body.imgUrl,\n                UserId: parseInt(req.params.userId) || null,\n                BarberId: parseInt(req.params.barberId) || null,\n                HaircutId: parseInt(req.params.haircutId) || null\n            })\n                .then(haircut => {\n                    res.send(haircut)\n                })\n        } catch(err) {\n            res.status(500).send({\n                error: 'An error has occurred trying to create haircut' + err\n            })\n        }\n    }\n};"]}